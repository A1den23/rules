# Mihomo é…ç½®æ–‡ä»¶

åŸºäº mihomo å†…æ ¸çš„ä»£ç†é…ç½®æ–‡ä»¶ï¼Œæ•´åˆäº† [MetaCubeX/meta-rules-dat](https://github.com/MetaCubeX/meta-rules-dat) å’Œ [blackmatrix7/ios_rule_script](https://github.com/blackmatrix7/ios_rule_script) çš„è§„åˆ™é›†ã€‚

## ç‰¹æ€§

- å¤šåŒºåŸŸèŠ‚ç‚¹è‡ªåŠ¨é€‰æ‹©ï¼ˆé¦™æ¸¯ã€æ–°åŠ å¡ã€æ—¥æœ¬ã€å°æ¹¾ã€ç¾å›½ï¼‰
- é’ˆå¯¹æ€§æœåŠ¡çš„ä¸“ç”¨ä»£ç†ç»„ï¼ˆBinanceã€YouTubeã€Appleã€Steamã€Spotifyã€Bilibiliã€PikPakã€CEXï¼‰
- TUN æ¨¡å¼é€æ˜ä»£ç†
- Fake-IP æ¨¡å¼ DNS ä¼˜åŒ–
- è‡ªåŠ¨è®¢é˜…æ›´æ–°
- è‡ªå®šä¹‰è§„åˆ™é›†æ”¯æŒ

## é…ç½®ç»“æ„

### ç«¯å£é…ç½®

| ç«¯å£ | ç±»å‹ | è¯´æ˜ |
|------|------|------|
| 7890 | HTTP | HTTP ä»£ç†ç«¯å£ |
| 7891 | SOCKS | SOCKS5 ä»£ç†ç«¯å£ |
| 7892 | Redir | è½¬å‘ç«¯å£ |
| 7893 | Mixed | æ··åˆç«¯å£ï¼ˆHTTP + SOCKSï¼‰ |
| 7894 | TProxy | é€æ˜ä»£ç†ç«¯å£ |
| 1053 | DNS | DNS ç›‘å¬ç«¯å£ |

### ä»£ç†ç»„

#### å…¨å±€ä»£ç†ç»„

- **ğŸš€ Proxies** - ä¸»ä»£ç†ç»„ï¼ŒåŒ…å«æ‰€æœ‰èŠ‚ç‚¹
- **ğŸ¯ Direct** - ç›´è¿/ä»£ç†é€‰æ‹©ç»„
- **ğŸŸ Others** - é»˜è®¤æµé‡å¤„ç†ç»„

#### æœåŠ¡ä¸“ç”¨ä»£ç†ç»„

| ä»£ç†ç»„ | è¯´æ˜ | èŠ‚ç‚¹é€‰æ‹© |
|--------|------|----------|
| Binance | å¸å®‰äº¤æ˜“æ‰€ | é¦™æ¸¯ä¼˜é€‰ |
| YouTube | è§†é¢‘æœåŠ¡ | å¤šåŒºåŸŸé€‰æ‹© |
| Apple | Apple æœåŠ¡ | ç›´è¿ä¼˜å…ˆ |
| Steam | Steam æ¸¸æˆ | ä»£ç†ä¼˜å…ˆ |
| Spotify | éŸ³ä¹æµåª’ä½“ | å¤šåŒºåŸŸé€‰æ‹© |
| Bilibili | Bç«™è§†é¢‘ | å°æ¹¾/ç›´è¿ |
| ğŸï¸ PikPak | PikPak æœåŠ¡ | è·Ÿéšå…¨å±€ |
| CEX | åŠ å¯†è´§å¸äº¤æ˜“æ‰€ | å¤šåŒºåŸŸé€‰æ‹© |

#### åŒºåŸŸä»£ç†ç»„

- **ğŸ‡­ğŸ‡° HongKong** - é¦™æ¸¯èŠ‚ç‚¹ï¼ˆå»¶è¿Ÿå®¹å·® 20msï¼‰
- **ğŸ‡¸ğŸ‡¬ Singapore** - æ–°åŠ å¡èŠ‚ç‚¹ï¼ˆå»¶è¿Ÿå®¹å·® 20msï¼‰
- **ğŸ‡¯ğŸ‡µ Japan** - æ—¥æœ¬èŠ‚ç‚¹ï¼ˆå»¶è¿Ÿå®¹å·® 20msï¼‰
- **ğŸ‡¨ğŸ‡³ Taiwan** - å°æ¹¾èŠ‚ç‚¹ï¼ˆå»¶è¿Ÿå®¹å·® 20msï¼‰
- **ğŸ‡ºğŸ‡² UnitedStates** - ç¾å›½èŠ‚ç‚¹ï¼ˆå»¶è¿Ÿå®¹å·® 20msï¼‰

æ‰€æœ‰åŒºåŸŸç»„æ¯ 300 ç§’è¿›è¡Œä¸€æ¬¡å¥åº·æ£€æŸ¥ã€‚

### è§„åˆ™é›†

è§„åˆ™é›†æŒ‰ä¼˜å…ˆçº§åŒ¹é…ï¼š

1. **Steam å›½å†…** â†’ ç›´è¿
2. **ç§æœ‰åœ°å€** â†’ ç›´è¿
3. **Binance** â†’ Binance ä»£ç†ç»„
4. **Apple** â†’ Apple ä»£ç†ç»„
5. **Steam** â†’ Steam ä»£ç†ç»„
6. **YouTube** â†’ YouTube ä»£ç†ç»„
7. **Spotify** â†’ Spotify ä»£ç†ç»„
8. **Bilibili** â†’ Bilibili ä»£ç†ç»„
9. **PikPak** â†’ PikPak ä»£ç†ç»„
10. **CEX äº¤æ˜“æ‰€** â†’ CEX ä»£ç†ç»„
11. **Hyperliquid** â†’ Binance ä»£ç†ç»„
12. **æ¸¸æˆ** â†’ Proxies ä»£ç†ç»„
13. **è‡ªå®šä¹‰è§„åˆ™** â†’ Proxies ä»£ç†ç»„
14. **GFW åˆ—è¡¨** â†’ Proxies ä»£ç†ç»„
15. **éä¸­å›½åœ°ç†ä½ç½®** â†’ Proxies ä»£ç†ç»„
16. **çŸ¥ä¹/ä¸­å›½åŸŸå/IP** â†’ ç›´è¿
17. **å…¶ä»–** â†’ Others ä»£ç†ç»„

### è§„åˆ™é›†æ¥æº

#### MetaCubeX è§„åˆ™ï¼ˆMRS æ ¼å¼ï¼‰

- `apple_cn_domain` / `apple_domain` - Apple æœåŠ¡
- `steam_cn_domain` / `steam_domain` - Steam æœåŠ¡
- `binance_domain` - å¸å®‰äº¤æ˜“æ‰€
- `youtube_domain` - YouTube
- `spotify_domain` - Spotify
- `bilibili_domain` / `bilibili_intl_domain` - Bç«™
- `pikpak_domain` - PikPak
- `bybit_domain` / `kraken_domain` / `ibkr_domain` - åŠ å¯†è´§å¸äº¤æ˜“æ‰€
- `private_domain` - ç§æœ‰åœ°å€
- `gfw_domain` - GFW åˆ—è¡¨
- `cn_domain` / `zhihu_domain` - å›½å†…åŸŸå
- `geolocation-!cn` - éä¸­å›½åœ°ç†ä½ç½®
- `cn_ip` / `google_ip` / `telegram_ip` - IP è§„åˆ™

#### è‡ªå®šä¹‰è§„åˆ™ï¼ˆTEXT æ ¼å¼ï¼‰

- `myRules` - [è‡ªå®šä¹‰è§„åˆ™åˆ—è¡¨](https://github.com/A1den23/rules)
- `cex` - [CEX äº¤æ˜“æ‰€è§„åˆ™](https://github.com/A1den23/rules)
- `Hyperliquid` - [Hyperliquid è§„åˆ™](https://github.com/A1den23/rules)
- `game` - [æ¸¸æˆè§„åˆ™](https://github.com/blackmatrix7/ios_rule_script)

## ä½¿ç”¨è¯´æ˜

### 1. é…ç½®è®¢é˜…é“¾æ¥

ç¼–è¾‘ [config.yaml](config.yaml#L4) ç¬¬ 4 è¡Œï¼Œæ›¿æ¢ `è®¢é˜…é“¾æ¥` ä¸ºä½ çš„å®é™…è®¢é˜…åœ°å€ï¼š

```yaml
proxy-providers:
  FlowerCloud:
    url: "ä½ çš„è®¢é˜…é“¾æ¥"
```

### 2. å¯åŠ¨ mihomo

```bash
# ä½¿ç”¨é…ç½®æ–‡ä»¶å¯åŠ¨
mihomo -f config.yaml

# æˆ–æŒ‡å®šå·¥ä½œç›®å½•
mihomo -d /path/to/config -f config.yaml
```

### 3. é…ç½®ç³»ç»Ÿä»£ç†

- **HTTP ä»£ç†**: `127.0.0.1:7890`
- **SOCKS5 ä»£ç†**: `127.0.0.1:7891`
- **æ··åˆä»£ç†**: `127.0.0.1:7893`

### 4. å¯ç”¨ TUN æ¨¡å¼

TUN æ¨¡å¼å·²é»˜è®¤å¯ç”¨ï¼Œé…ç½®å¦‚ä¸‹ï¼š

```yaml
tun:
  enable: true
  stack: mixed   # å¯é€‰: system/gvisor/mixed
  auto-route: true
  auto-redirect: true
```

å¯åŠ¨åéœ€è¦æˆäºˆ mihomo ç½‘ç»œæƒé™ã€‚

## DNS é…ç½®

### DNS æ¨¡å¼

- **å¢å¼ºæ¨¡å¼**: fake-ip
- **Fake-IP èŒƒå›´**: 28.0.0.1/8
- **è¿‡æ»¤æ¨¡å¼**: blacklist

### DNS æœåŠ¡å™¨

| ç±»å‹ | æœåŠ¡å™¨ | ç”¨é€” |
|------|--------|------|
| é»˜è®¤ | 223.5.5.5, 119.29.29.29 | å¸¸è§„è§£æ |
| ç›´è¿ | 223.5.5.5, 119.29.29.29 | å›½å†…åŸŸå |
| ä»£ç† | https://223.5.5.5/dns-query | é€šè¿‡ä»£ç†æŸ¥è¯¢ |

### Fake-IP è¿‡æ»¤

ä»¥ä¸‹åŸŸåä¸ä¼šè¢« Fake-IP å¤„ç†ï¼š

- è§„åˆ™é›†: `private_domain`, `cn_domain`, `zhihu_domain`
- å¾®è½¯ç½‘ç»œæµ‹è¯•: `+.msftconnecttest.com`, `+.msftncsi.com`
- æ—¶é—´æœåŠ¡: `time.*.com`
- å°ç±³æœåŠ¡: `+.market.xiaomi.com`

## è‡ªå®šä¹‰è§„åˆ™

### æ·»åŠ ä¸ªäººè§„åˆ™

ç¼–è¾‘ä»¥ä¸‹æ–‡ä»¶æˆ–ä»“åº“ï¼š

1. **MyRules.list** - é€šç”¨è‡ªå®šä¹‰è§„åˆ™
2. **CEX.list** - åŠ å¯†è´§å¸äº¤æ˜“æ‰€è§„åˆ™
3. **Hyperliquid.list** - Hyperliquid ä¸“ç”¨è§„åˆ™

è§„åˆ™æ ¼å¼ï¼ˆTEXTï¼‰ï¼š

```
DOMAIN,suffix.example.com,ProxyGroup
DOMAIN-KEYWORD,keyword,ProxyGroup
IP-CIDR,1.2.3.4/32,ProxyGroup,no-resolve
```

### ä¿®æ”¹ä»£ç†ç»„é€‰æ‹©

åœ¨ [rules](config.yaml#L95) éƒ¨åˆ†ä¿®æ”¹ç›®æ ‡ä»£ç†ç»„ï¼š

```yaml
- RULE-SET, myRules,ğŸš€ Proxies  # ä¿®æ”¹è¿™é‡Œçš„ä»£ç†ç»„åç§°
```

## é…ç½®é€‰é¡¹

### å…¨å±€é€‰é¡¹

- **å…è®¸å±€åŸŸç½‘è¿æ¥**: `allow-lan: true`
- **ç»‘å®šåœ°å€**: `*` (æ‰€æœ‰æ¥å£)
- **IPv6**: å…³é—­
- **ç»Ÿä¸€å»¶è¿Ÿ**: å¯ç”¨
- **TCP å¹¶å‘**: å¯ç”¨
- **æ—¥å¿—çº§åˆ«**: warning
- **è¿›ç¨‹æŸ¥æ‰¾æ¨¡å¼**: off
- **å®¢æˆ·ç«¯æŒ‡çº¹**: chrome

### ä¿æ´»é…ç½®

- **ç©ºé—²ä¿æ´»**: 600 ç§’
- **ä¿æ´»é—´éš”**: 15 ç§’

### æ€§èƒ½é…ç½®

- **TCP å¹¶å‘**: å¯ç”¨ï¼ˆæé«˜è¿æ¥æ€§èƒ½ï¼‰
- **ç»Ÿä¸€å»¶è¿Ÿæ˜¾ç¤º**: å¯ç”¨ï¼ˆæ›´å‡†ç¡®çš„å»¶è¿Ÿè®¡ç®—ï¼‰

## è®¢é˜…æ›´æ–°

é…ç½®æ–‡ä»¶ä¸­çš„ `proxy-providers` å’Œ `rule-providers` ä¼šè‡ªåŠ¨æ›´æ–°ï¼š

- **è®¢é˜…é“¾æ¥**: æ¯ 86400 ç§’ï¼ˆ24 å°æ—¶ï¼‰æ›´æ–°ä¸€æ¬¡
- **å¥åº·æ£€æŸ¥**: æ¯ 300 ç§’ï¼ˆ5 åˆ†é’Ÿï¼‰
- **è§„åˆ™é›†**: æ¯ 86400 ç§’ï¼ˆ24 å°æ—¶ï¼‰æ›´æ–°ä¸€æ¬¡

## æ•…éšœæ’é™¤

### èŠ‚ç‚¹ä¸å·¥ä½œ

1. æ£€æŸ¥è®¢é˜…é“¾æ¥æ˜¯å¦æ­£ç¡®
2. æŸ¥çœ‹æ—¥å¿—è¾“å‡ºï¼š`log-level: info` æˆ– `debug`
3. æ‰‹åŠ¨æµ‹è¯•èŠ‚ç‚¹å¥åº·çŠ¶æ€

### DNS è§£æé—®é¢˜

1. ç¡®ä¿ fake-ip æ¨¡å¼æ­£å¸¸å·¥ä½œ
2. æ£€æŸ¥ `fake-ip-filter` æ˜¯å¦åŒ…å«éœ€è¦ç›´è¿çš„åŸŸå
3. å°è¯•åˆ‡æ¢ DNS æœåŠ¡å™¨

### è§„åˆ™ä¸åŒ¹é…

1. æ£€æŸ¥è§„åˆ™é›†æ˜¯å¦æ­£ç¡®åŠ è½½
2. ä½¿ç”¨ `mihomo -f config.yaml -t` æµ‹è¯•é…ç½®
3. æŸ¥çœ‹æ—¥å¿—ä¸­çš„è§„åˆ™åŒ¹é…ä¿¡æ¯

### TUN æ¨¡å¼é—®é¢˜

1. æ£€æŸ¥æ˜¯å¦æˆäºˆç½‘ç»œæƒé™
2. å°è¯•åˆ‡æ¢ stack æ¨¡å¼ï¼ˆ`system`/`gvisor`/`mixed`ï¼‰
3. ç¡®ä¿ `auto-route` å’Œ `auto-detect-interface` å¯ç”¨

## æ³¨æ„äº‹é¡¹

1. **è®¢é˜…é“¾æ¥å®‰å…¨**: ä¸è¦åœ¨å…¬å¼€åœºåˆåˆ†äº«åŒ…å«çœŸå®è®¢é˜…é“¾æ¥çš„é…ç½®æ–‡ä»¶
2. **å®šæœŸæ›´æ–°**: è§„åˆ™é›†ä¼šè‡ªåŠ¨æ›´æ–°ï¼Œä¹Ÿå¯æ‰‹åŠ¨é‡å¯è§¦å‘æ›´æ–°
3. **èµ„æºå ç”¨**: Fake-IP æ¨¡å¼ä¼šå ç”¨å°‘é‡å†…å­˜ï¼Œæ€§èƒ½æ›´ä¼˜
4. **å¹³å°å…¼å®¹**: æœ¬é…ç½®é€‚ç”¨äº mihomo å†…æ ¸ï¼ˆClash Metaï¼‰

## å‚è€ƒèµ„æº

- [Mihomo å®˜æ–¹æ–‡æ¡£](https://wiki.metacubex.one/)
- [MetaCubeX è§„åˆ™é›†](https://github.com/MetaCubeX/meta-rules-dat)
- [Clash è§„åˆ™ç¤ºä¾‹](https://github.com/blackmatrix7/ios_rule_script)
- [è‡ªå®šä¹‰è§„åˆ™ä»“åº“](https://github.com/A1den23/rules)

## è®¸å¯è¯

æœ¬é…ç½®æ–‡ä»¶ä»…ä¾›ä¸ªäººå­¦ä¹ ç ”ç©¶ä½¿ç”¨ã€‚
